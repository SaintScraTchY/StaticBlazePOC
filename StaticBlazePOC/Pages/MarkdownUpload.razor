@page "/markdown-upload"
@using StaticBlazePOC.Models
@inject GitHubService GitHubService

<h3>Upload Markdown</h3>

<EditForm Model="@textGit" OnValidSubmit="UploadMarkdown">
    <InputText @bind-Value="@textGit.GitFilePath" placeholder="File Path (e.g., posts/test.md)" />
    <br/>
    <InputTextArea @bind-Value="@textGit.MarkdownContent" placeholder="Markdown Content" />
    <br/>
    <InputText @bind-Value="@textGit.GitHubPat" placeholder="GitHub PAT" />
    <br/>
    <button type="submit">Upload</button>
</EditForm>

@code {
    private TextGitUploadModel textGit = new TextGitUploadModel();

    private async Task UploadMarkdown()
    {
        try
        {
            await GitHubService.PushMarkdownFile("SaintScraTchY", "StaticBlazePOC", textGit.GitFilePath, textGit.MarkdownContent, textGit.GitHubPat);
            Console.WriteLine("Markdown uploaded successfully!");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
        }
    }

}